<!DOCTYPE html>
<!--
	Orbâ€¢Fall: ChromaCrush
	Copyright (c) 2025 G. Scott Tomlin. All Rights Reserved.
	
	A color-matching puzzle game combining Tetris-style piece dropping
	with match-3 mechanics and special power orbs.
-->
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
	<title>Orbâ€¢Fall: ChromaCrush</title>
	<link rel="stylesheet" href="src/styles/main.css">
	
	<!-- Mixpanel Analytics -->
	<script type="text/javascript">
		(function(f,b){if(!b.__SV){var e,g,i,h;window.mixpanel=b;b._i=[];b.init=function(e,f,c){function g(a,d){var b=d.split(".");2==b.length&&(a=a[b[0]],d=b[1]);a[d]=function(){a.push([d].concat(Array.prototype.slice.call(arguments,0)))}}var a=b;"undefined"!==typeof c?a=b[c]=[]:c="mixpanel";a.people=a.people||[];a.toString=function(a){var d="mixpanel";"mixpanel"!==c&&(d+="."+c);a||(d+=" (stub)");return d};a.people.toString=function(){return a.toString(1)+".people (stub)"};i="disable time_event track track_pageview track_links track_forms track_with_groups add_group set_group remove_group register register_once alias unregister identify name_tag set_config reset opt_in_tracking opt_out_tracking has_opted_in_tracking has_opted_out_tracking clear_opt_in_out_tracking start_batch_senders people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user people.remove".split(" ");
		for(h=0;h<i.length;h++)g(a,i[h]);var j="set set_once union unset remove delete".split(" ");a.get_group=function(){function b(c){d[c]=function(){call2_args=arguments;call2=[c].concat(Array.prototype.slice.call(call2_args,0));a.push([e,call2])}}for(var d={},e=["get_group"].concat(Array.prototype.slice.call(arguments,0)),c=0;c<j.length;c++)b(j[c]);return d};b._i.push([e,f,c])};b.__SV=1.2;e=f.createElement("script");e.type="text/javascript";e.async=!0;e.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===f.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";g=f.getElementsByTagName("script")[0];g.parentNode.insertBefore(e,g)}})(document,window.mixpanel||[]);
	</script>
</head>
<body>
	<!-- Main Container -->
	<div id="app">
		
		<!-- Menu Screen -->
		<div id="menuScreen" class="screen">
			<div class="menu-container">
				<img src="src/img/Logotrans.png" alt="Orb Fall Logo" class="game-logo">
				
			<!-- Player Selection -->
			<div class="player-selection">
				<h2>Player</h2>
				<div class="player-controls">
						<select id="playerSelect" class="player-select">
							<!-- Options populated by JavaScript -->
						</select>
						<button id="addPlayerButton" class="btn-icon" title="Add New Player">â•</button>
						<button id="deletePlayerButton" class="btn-icon" title="Delete Player">ğŸ—‘ï¸</button>
					</div>
				</div>
				
				<div class="difficulty-selector">
					<h2>Select Difficulty</h2>
					<div class="difficulty-buttons">
						<button class="difficulty-btn" data-difficulty="1">Easy</button>
						<button class="difficulty-btn" data-difficulty="2">Medium</button>
						<button class="difficulty-btn" data-difficulty="3">Hard</button>
						<button class="difficulty-btn" data-difficulty="4">Expert</button>
						<button class="difficulty-btn" data-difficulty="5">Master</button>
					</div>
				</div>
				
				<div class="level-selector">
					<h2>Select Level</h2>
					<div id="levelGrid" class="level-grid">
						<!-- Level buttons dynamically generated -->
					</div>
				</div>
				
			<div class="menu-actions">
				<button id="startButton" class="btn-primary">Start Game</button>
				<button id="settingsButton" class="btn-secondary">Settings</button>
				<a href="guide.html" class="btn-secondary" style="display: inline-block; text-decoration: none; text-align: center;">How to Play</a>
			</div>
			</div>
		</div>
		
		<!-- Game Screen -->
		<div id="gameScreen" class="screen hidden">
			<!-- HUD -->
			<div id="hud" class="hud">
				<div class="hud-left">
					<div class="hud-item">
						<span class="hud-label">Difficulty:</span>
						<span id="difficultyDisplay" class="hud-value">1</span>
						<input type="number" id="difficultyInput" class="hud-input" min="1" max="5" value="1" style="display: none;">
					</div>
					<div class="hud-item">
						<span class="hud-label">Level:</span>
						<span id="levelDisplay" class="hud-value">1</span>
						<input type="number" id="levelInput" class="hud-input" min="1" max="20" value="1" style="display: none;">
					</div>
			</div>
			
	<div class="hud-center">
		<div class="hud-item colors-compact">
			<span class="hud-label">Colors:</span>
			<div id="availableColors" class="available-colors"></div>
		</div>
		<div class="hud-item timer">
			<span id="timerDisplay" class="hud-value timer-value">15.0s</span>
		</div>
			<div class="hud-item preview-compact">
				<span class="hud-label">Next:</span>
				<canvas id="previewCanvas" width="96" height="72"></canvas>
			</div>
		</div>				<div class="hud-right">
				<div class="hud-item">
					<span class="hud-label">Score:</span>
					<span id="currentScoreDisplay" class="hud-value">0</span>
				</div>
				<div class="hud-item">
					<span class="hud-label">Best:</span>
					<span id="bestScoreDisplay" class="hud-value">0</span>
				</div>
			</div>
	</div>		<!-- Game Board Container -->
		<div class="game-container">
			<!-- Orb Types Legend -->
			<div class="ball-legend">
				<h3>Orb Types</h3>
				<div class="legend-item">
					<div class="legend-ball normal-ball"></div>
					<div class="legend-text">
						<strong>Normal</strong>
						<span>Standard orb</span>
					</div>
				</div>
				<div class="legend-item">
					<div class="legend-ball exploding-ball"></div>
					<div class="legend-text">
						<strong>Exploding</strong>
						<span>Destroys nearby orbs</span>
					</div>
				</div>
				<div class="legend-item">
					<div class="legend-ball blocking-ball">âœ•</div>
					<div class="legend-text">
						<strong>Blocking</strong>
						<span>Cleared only by explosions</span>
					</div>
				</div>
				<div class="legend-item">
					<div class="legend-ball painter-h">â”€</div>
					<div class="legend-text">
						<strong>Painter H</strong>
						<span>Paints row same color</span>
					</div>
				</div>
				<div class="legend-item">
					<div class="legend-ball painter-v">â”‚</div>
					<div class="legend-text">
						<strong>Painter V</strong>
						<span>Paints column same color</span>
					</div>
				</div>
				<div class="legend-item">
					<div class="legend-ball painter-dne">â•±</div>
					<div class="legend-text">
						<strong>Painter NE</strong>
						<span>Paints NE-SW diagonal</span>
					</div>
				</div>
				<div class="legend-item">
					<div class="legend-ball painter-dnw">â•²</div>
					<div class="legend-text">
						<strong>Painter NW</strong>
						<span>Paints NW-SE diagonal</span>
					</div>
				</div>
			</div>
			
			<!-- Main Game Canvas -->
			<canvas id="gameCanvas"></canvas>
			
			<!-- Statistics Panel (desktop only) -->
			<div class="stats-panel-container">
				<div class="stats-panel">
					<h3>Match Statistics</h3>
					<div id="statsBoard" class="stats-board">
						<!-- Will be populated by JavaScript -->
					</div>
				</div>
			</div>
		</div>
			
			<!-- Controls Info -->
			<div class="controls-info">
			<div class="controls-keys">
				<p class="controls-text"><kbd data-action="moveLeft">â†</kbd> Move <kbd data-action="moveRight">â†’</kbd> | <kbd data-action="rotate">â†‘</kbd> Rotate | <kbd data-action="softDrop">Space</kbd> Soft Drop | <kbd data-action="drop">â†“</kbd> Drop | <kbd data-action="pause">P</kbd> Pause | <kbd data-action="restart">R</kbd> Restart</p>
				<p class="controls-icons"><kbd data-action="moveLeft">â†</kbd> <kbd data-action="moveRight">â†’</kbd> | <kbd data-action="rotate">â†‘</kbd> | <kbd data-action="softDrop">+</kbd> | <kbd data-action="drop">â†“</kbd> | <kbd data-action="pause">P</kbd> | <kbd data-action="restart">R</kbd></p>
			</div>
				<div class="hud-item clock">
					<span id="weatherDisplay" class="weather-info">--</span>
					<span class="separator">|</span>
					<span id="tempDisplay" class="temp-info">--Â°F / --Â°C</span>
					<span class="separator">|</span>
					<span id="clockDisplay" class="clock-time">--:--</span>
				</div>
			</div>
		</div>
		
		<!-- Pause Overlay -->
		<div id="pauseOverlay" class="overlay hidden">
			<div class="overlay-content">
				<h2>Paused</h2>
				<div class="overlay-actions">
					<button id="resumeButton" class="btn-primary">Resume</button>
					<button id="restartFromPauseButton" class="btn-secondary">Restart</button>
					<button id="menuFromPauseButton" class="btn-secondary">Main Menu</button>
				</div>
			</div>
		</div>
		
		<!-- Game Over Overlay -->
		<div id="gameOverOverlay" class="overlay hidden">
			<div class="overlay-content">
				<h2>Game Over</h2>
				<div class="game-over-stats">
					<p class="stat-label">Level Score:</p>
					<p id="finalLevelScore" class="stat-value">0</p>
					<p class="stat-label">Total Score:</p>
					<p id="finalTotalScore" class="stat-value">0</p>
					<p id="newHighScoreMessage" class="new-high-score hidden">ğŸ‰ NEW HIGH SCORE! ğŸ‰</p>
				</div>
				<div class="overlay-actions">
					<button id="retryButton" class="btn-primary">Retry</button>
					<button id="menuFromGameOverButton" class="btn-secondary">Main Menu</button>
				</div>
			</div>
		</div>
		
		<!-- Level Complete Overlay -->
		<div id="levelCompleteOverlay" class="overlay hidden">
			<div class="overlay-content">
				<h2 id="levelCompleteTitle">Level Complete!</h2>
				<p id="levelCompleteReason" class="level-complete-reason"></p>
				<div class="level-complete-stats">
					<div class="stat-row">
						<span class="stat-label">This Time:</span>
						<span id="completeThisScore" class="stat-value">0</span>
					</div>
					<div class="stat-row">
						<span class="stat-label">Best Score:</span>
						<span id="completeBestScore" class="stat-value">0</span>
					</div>
					<p id="levelCompleteHighScoreMessage" class="new-high-score hidden">ğŸ‰ NEW BEST SCORE! ğŸ‰</p>
				</div>
				<div class="level-complete-match-stats">
					<h3>Match Statistics</h3>
					<div id="levelCompleteStatsBoard" class="stats-board">
						<!-- Will be populated by JavaScript -->
					</div>
				</div>
				<div class="overlay-actions">
					<button id="nextLevelButton" class="btn-primary">Next Level</button>
					<button id="replayLevelButton" class="btn-secondary">Replay Level</button>
					<button id="menuFromCompleteButton" class="btn-secondary">Main Menu</button>
				</div>
			</div>
		</div>
		
		<!-- Settings Overlay -->
		<div id="settingsOverlay" class="overlay hidden">
			<div class="overlay-content">
				<h2>Settings</h2>
				<div class="settings-options">
					<div class="setting-item">
						<label for="muteToggle">
							<span class="setting-icon">ğŸ”Š</span> Mute All:
						</label>
						<input type="checkbox" id="muteToggle" class="toggle-checkbox">
					</div>
					
					<div class="setting-item">
						<label for="masterVolumeSlider">
							<span class="setting-icon">ğŸšï¸</span> Master Volume:
						</label>
						<input type="range" id="masterVolumeSlider" min="0" max="100" value="70" class="volume-slider">
						<span id="masterVolumeValue" class="volume-value">70%</span>
					</div>
					
					<div class="setting-item">
						<label for="sfxVolumeSlider">
							<span class="setting-icon">ğŸ’¥</span> Sound Effects:
						</label>
						<input type="range" id="sfxVolumeSlider" min="0" max="100" value="80" class="volume-slider">
						<span id="sfxVolumeValue" class="volume-value">80%</span>
					</div>
					
					<div class="setting-item">
						<label for="musicVolumeSlider">
							<span class="setting-icon">ğŸµ</span> Music:
						</label>
						<input type="range" id="musicVolumeSlider" min="0" max="100" value="50" class="volume-slider">
						<span id="musicVolumeValue" class="volume-value">50%</span>
					</div>
					
					<div class="setting-item setting-danger">
						<label>
							<span class="setting-icon">âš ï¸</span> Reset Player Data:
						</label>
						<button id="resetPlayerButton" class="btn-danger">Reset All Stats & Progress</button>
					</div>
				</div>
				<div class="overlay-actions">
				<button id="closeSettingsButton" class="btn-primary">Close</button>
			</div>
		</div>
	</div>
	
	<!-- Add Player Overlay -->
	<div id="addPlayerOverlay" class="overlay hidden">
		<div class="overlay-content">
			<h2>Add New Player</h2>
			<div class="player-form">
				<label for="newPlayerName">Player Name:</label>
				<input type="text" id="newPlayerName" class="player-input" maxlength="20" placeholder="Enter player name..." />
				<p id="addPlayerError" class="error-message hidden"></p>
			</div>
			<div class="overlay-actions">
				<button id="confirmAddPlayer" class="btn-primary">Add Player</button>
				<button id="cancelAddPlayer" class="btn-secondary">Cancel</button>
			</div>
		</div>
	</div>
	
	<!-- Delete Player Overlay -->
	<div id="deletePlayerOverlay" class="overlay hidden">
		<div class="overlay-content">
			<h2>Delete Player</h2>
			<div class="player-form">
				<p id="deletePlayerMessage" class="warning-message"></p>
			</div>
			<div class="overlay-actions">
				<button id="confirmDeletePlayer" class="btn-danger">Delete</button>
				<button id="cancelDeletePlayer" class="btn-secondary">Cancel</button>
			</div>
		</div>
	</div>
	
	<!-- Particle Canvas Overlay (for celebrations that need to appear above overlays) -->
	<canvas id="particleCanvas" class="particle-overlay"></canvas>	</div>
	
	<!-- JavaScript Modules -->
	<script type="module" src="src/main.js"></script>
</body>
</html>
